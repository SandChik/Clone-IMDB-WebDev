model Drama {
  id             Int      @id @default(autoincrement())
  title          String
  alternativeTitle String?
  year           Int
  countryId      Int
  synopsis       String
  availability   String?
  linkTrailer    String?
  award          String?
  posterUrl      String?
  rating         Float?
  duration       Int?
  status         Int      @default(0) // Ubah menjadi Int dengan nilai default 0
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  country        Country  @relation(fields: [countryId], references: [id], onDelete: Cascade) // Tambahkan onDelete: Cascade
  genres         DramaToGenres[]
  actors         ActorToDrama[]
  reviews        Review[]
}

model Country {
  id      Int      @id @default(autoincrement())
  name    String   @unique
  dramas  Drama[]  @relation(onDelete: Cascade) // Tambahkan onDelete: Cascade
  actors  Actor[]  @relation(onDelete: Cascade) // Tambahkan onDelete: Cascade
}

model Actor {
  id        Int      @id @default(autoincrement())
  name      String
  urlPhoto  String?  // URL untuk foto aktor (opsional)
  country   Country  @relation(fields: [countryId], references: [id], onDelete: Cascade) // Tambahkan onDelete: Cascade
  countryId Int
  dramas    ActorToDrama[]
}

model ActorToDrama {
  actorId  Int
  dramaId  Int

  actor    Actor  @relation(fields: [actorId], references: [id])
  drama    Drama  @relation(fields: [dramaId], references: [id])

  @@id([actorId, dramaId])
}

model Genre {
  id      Int      @id @default(autoincrement())
  name    String   @unique
  dramas  DramaToGenres[]
}

model DramaToGenres {
  dramaId  Int
  genreId  Int

  drama    Drama  @relation(fields: [dramaId], references: [id])
  genre    Genre  @relation(fields: [genreId], references: [id])

  @@id([dramaId, genreId])
}

model Review {
  id        Int      @id @default(autoincrement())
  author    String
  content   String
  rating    Float?
  createdAt DateTime @default(now())
  drama     Drama    @relation(fields: [dramaId], references: [id], onDelete: Cascade) // Tambahkan onDelete: Cascade
  dramaId   Int
}
